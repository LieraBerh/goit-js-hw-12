{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["//#region library import\n\nimport iziToast from 'izitoast';\n\nimport 'izitoast/dist/css/iziToast.min.css';\n\n//#endregion\n\nexport function getPhotos(query) {\n  const apiKey = '43995024-c8f5c7e28b3078307d7d8500b';\n  const BASE_URL = 'https://pixabay.com';\n  const END_POINT = '/api/';\n\n  const params = new URLSearchParams({\n    key: apiKey,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  });\n\n  const url = `${BASE_URL}${END_POINT}?${params}`;\n\n  return fetch(url)\n    .then(response => {\n      if (!response.ok) {\n        throw new Error(response.status);\n      }\n      return response.json();\n    })\n    .then(pictures => {\n      return pictures.hits;\n    })\n    .catch(error => {\n      iziToast.error({\n        title: 'Error',\n        message: error,\n      });\n    });\n}\n","function pictureTemplate({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return `\n<li class=\"gallery-item\">\n<a class=\"gallery-link\" href=\"${largeImageURL}\">\n<img src=\"${webformatURL}\" alt='${tags}'class=\"gallery-image\"/>\n</a>\n<div class=\"caption-wrapper\">\n<p><span>Likes: </span>${likes}</p>\n<p><span>Views: </span>${views}</p>\n<p><span>Comments: </span>${comments}</p>\n<p><span>Downloads: </span>${downloads}</p>\n</div>\n</li>`;\n}\n\nexport function picturesTemplate(arr) {\n  return arr.map(pictureTemplate).join('');\n}\n","//#region libraries\n\nimport SimpleLightbox from 'simplelightbox';\n\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\n\nimport 'izitoast/dist/css/iziToast.min.css';\n\n//#endregion\n\n//#region imports\n\nimport { getPhotos } from './js/pixabay-api';\n\nimport { picturesTemplate } from './js/render-functions';\n\n//#endregion\n\nconst refs = {\n  formEl: document.querySelector('#searchForm'),\n  inputEl: document.querySelector('#searchInput'),\n  submitBtn: document.querySelector('#submitButton'),\n  searchRes: document.querySelector('#searchResults'),\n  loaderEl: document.querySelector('.loader'),\n  backdropEl: document.querySelector('.loader-backdrop'),\n};\n\nconst lightbox = new SimpleLightbox('#searchResults a', {\n  overlay: true,\n  captions: true,\n  captionSelector: 'img',\n  captionType: 'attr',\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n  captionClass: 'caption',\n  close: true,\n  showCounter: true,\n  enableKeyboard: true,\n  docClose: true,\n  clasName: 'gallery-item-modal',\n});\n\ndocument.addEventListener('DOMContentLoaded', hideLoader);\n\nfunction hideLoader() {\n  refs.loaderEl.classList.add('visually-hidden');\n  refs.backdropEl.classList.add('visually-hidden');\n}\n\nfunction showLoader() {\n  refs.loaderEl.classList.remove('visually-hidden');\n  refs.backdropEl.classList.remove('visually-hidden');\n}\n\nrefs.formEl.addEventListener('submit', handleFormSubmit);\n\nfunction handleFormSubmit(e) {\n  e.preventDefault();\n\n  refs.searchRes.innerHTML = '';\n  showLoader();\n\n  if (!refs.inputEl.value) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter search parameters',\n    });\n    hideLoader();\n    return;\n  }\n\n  const query = e.target.elements.query.value.trim().toLowerCase();\n\n  getPhotos(query)\n    .then(data => {\n      if (data.length === 0) {\n        iziToast.error({\n          title: 'Error',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n        });\n      }\n      const markup = picturesTemplate(data);\n\n      refs.searchRes.innerHTML = markup;\n\n      lightbox.refresh();\n\n      hideLoader();\n    })\n    .catch(err => {\n      iziToast.error({\n        title: 'Error',\n        message: err,\n      });\n      hideLoader();\n    })\n    .finally(() => {\n      hideLoader();\n    });\n\n  e.target.reset();\n}\n"],"names":["getPhotos","query","apiKey","BASE_URL","END_POINT","params","url","response","pictures","error","iziToast","pictureTemplate","webformatURL","largeImageURL","tags","likes","views","comments","downloads","picturesTemplate","arr","refs","lightbox","SimpleLightbox","hideLoader","showLoader","handleFormSubmit","e","data","markup","err"],"mappings":"6vBAQO,SAASA,EAAUC,EAAO,CAC/B,MAAMC,EAAS,qCACTC,EAAW,sBACXC,EAAY,QAEZC,EAAS,IAAI,gBAAgB,CACjC,IAAKH,EACL,EAAGD,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,CAAG,EAEKK,EAAM,GAAGH,CAAQ,GAAGC,CAAS,IAAIC,CAAM,GAE7C,OAAO,MAAMC,CAAG,EACb,KAAKC,GAAY,CAChB,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEjC,OAAOA,EAAS,MACtB,CAAK,EACA,KAAKC,GACGA,EAAS,IACjB,EACA,MAAMC,GAAS,CACdC,EAAS,MAAM,CACb,MAAO,QACP,QAASD,CACjB,CAAO,CACP,CAAK,CACL,CCvCA,SAASE,EAAgB,CACvB,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACF,EAAG,CACD,MAAO;AAAA;AAAA,gCAEuBL,CAAa;AAAA,YACjCD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,yBAGbC,CAAK;AAAA,yBACLC,CAAK;AAAA,4BACFC,CAAQ;AAAA,6BACPC,CAAS;AAAA;AAAA,MAGtC,CAEO,SAASC,EAAiBC,EAAK,CACpC,OAAOA,EAAI,IAAIT,CAAe,EAAE,KAAK,EAAE,CACzC,CCLA,MAAMU,EAAO,CACX,OAAQ,SAAS,cAAc,aAAa,EAC5C,QAAS,SAAS,cAAc,cAAc,EAC9C,UAAW,SAAS,cAAc,eAAe,EACjD,UAAW,SAAS,cAAc,gBAAgB,EAClD,SAAU,SAAS,cAAc,SAAS,EAC1C,WAAY,SAAS,cAAc,kBAAkB,CACvD,EAEMC,EAAW,IAAIC,EAAe,mBAAoB,CACtD,QAAS,GACT,SAAU,GACV,gBAAiB,MACjB,YAAa,OACb,aAAc,MACd,gBAAiB,SACjB,aAAc,IACd,aAAc,UACd,MAAO,GACP,YAAa,GACb,eAAgB,GAChB,SAAU,GACV,SAAU,oBACZ,CAAC,EAED,SAAS,iBAAiB,mBAAoBC,CAAU,EAExD,SAASA,GAAa,CACpBH,EAAK,SAAS,UAAU,IAAI,iBAAiB,EAC7CA,EAAK,WAAW,UAAU,IAAI,iBAAiB,CACjD,CAEA,SAASI,GAAa,CACpBJ,EAAK,SAAS,UAAU,OAAO,iBAAiB,EAChDA,EAAK,WAAW,UAAU,OAAO,iBAAiB,CACpD,CAEAA,EAAK,OAAO,iBAAiB,SAAUK,CAAgB,EAEvD,SAASA,EAAiBC,EAAG,CAM3B,GALAA,EAAE,eAAc,EAEhBN,EAAK,UAAU,UAAY,GAC3BI,IAEI,CAACJ,EAAK,QAAQ,MAAO,CACvBX,EAAS,MAAM,CACb,MAAO,QACP,QAAS,gCACf,CAAK,EACDc,IACA,MACD,CAED,MAAMvB,EAAQ0B,EAAE,OAAO,SAAS,MAAM,MAAM,OAAO,cAEnD3B,EAAUC,CAAK,EACZ,KAAK2B,GAAQ,CACRA,EAAK,SAAW,GAClBlB,EAAS,MAAM,CACb,MAAO,QACP,QACE,0EACZ,CAAS,EAEH,MAAMmB,EAASV,EAAiBS,CAAI,EAEpCP,EAAK,UAAU,UAAYQ,EAE3BP,EAAS,QAAO,EAEhBE,GACN,CAAK,EACA,MAAMM,GAAO,CACZpB,EAAS,MAAM,CACb,MAAO,QACP,QAASoB,CACjB,CAAO,EACDN,GACN,CAAK,EACA,QAAQ,IAAM,CACbA,GACN,CAAK,EAEHG,EAAE,OAAO,OACX"}